networks:
  ups-net:
    driver: bridge 

services:
 base:
   image: postgres
   restart: always
   environment:
     POSTGRES_PASSWORD: ${POSTGRES_PASSWORD:?database password not set}
   volumes:
     - postgres-data:/var/lib/postgresql/data
   networks:
     - ups-net

 adminer:
   image: adminer
   restart: always
   ports:
     - 8080:8080
   networks:
     - ups-net

 backend:
   build:
     context: ./Backend
   ports:
     - 2006:443
     - 2007:80
   depends_on:
     - base
   networks:
     - ups-net
   environment:
     ASPNETCORE_URLS: http://+;
     ASPNETCORE_HTTPS_PORT: 2006
 
 frontend:
   build:
     context: ./Frontend/ups
   ports:
     - 3000:3000
   depends_on:
     - backend
   networks:
     - ups-net
   environment:
     REACT_APP_BACKEND_URL: http://backend:80
     
volumes:
 postgres-data: